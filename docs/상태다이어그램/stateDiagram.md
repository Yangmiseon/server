```mermaid
stateDiagram
    [*] --> 로그인
    로그인 --> 선착순대상확인
    선착순대상확인 --> 쿠폰발행
    선착순대상확인--> 쿠폰미발행
    로그인 --> 포인트충전
    포인트충전 --> 상품조회
    상품조회 --> 주문
    주문 --> 재고조회
    재고조회 --> 재고있음
    재고있음 --> 포인트잔액여부
    재고조회 --> 재고없음
    포인트잔액여부 --> 포인트사용가능
    포인트잔액여부 --> 포인트사용불가능
    포인트사용가능 --> 쿠폰사용여부
    쿠폰사용여부 --> 쿠폰사용
    쿠폰사용여부 --> 쿠폰미사용
    쿠폰사용 --> 할인
    할인 --> 결제
    쿠폰미사용 -->결제
    결제 --> 완료
    재고없음 --> 주문취소
    포인트사용불가능 --> 주문취소
    주문취소 --> 완료
    완료 --> [*]
```